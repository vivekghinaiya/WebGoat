trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

steps:
- script: |
    sudo apt update
    sudo apt install -y openjdk-23-jdk
    sudo update-alternatives --install /usr/bin/java java /usr/lib/jvm/java-23-openjdk-amd64/bin/java 1
    sudo update-alternatives --install /usr/bin/javac javac /usr/lib/jvm/java-23-openjdk-amd64/bin/javac 1
    sudo update-alternatives --set java /usr/lib/jvm/java-23-openjdk-amd64/bin/java
    sudo update-alternatives --set javac /usr/lib/jvm/java-23-openjdk-amd64/bin/javac
    java -version
  displayName: 'Install and set Java 23 as default'

- script: |
    wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-5.0.1.3006-linux.zip
    unzip sonar-scanner-cli-5.0.1.3006-linux.zip
    export PATH=$PATH:$(pwd)/sonar-scanner-5.0.1.3006-linux/bin
    sonar-scanner --version
  displayName: 'Install SonarScanner CLI'
